/**
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * Universidad de los Andes (Bogotá - Colombia)
 * Departamento de Ingeniería de Sistemas y Computación 
 * Licenciado bajo el esquema Academic Free License version 2.1 
 *
 * Proyecto Cupi2 (http://cupi2.uniandes.edu.co)
 * Ejercicio: n12_batallaPokemon
 * Autor: Equipo Cupi2 2016
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 */

package uniandes.cupi2.batallaPokemon.servidor.mundo;

import java.text.*;

/**
 * Esta clase mantiene la información del número de de victorias y derrotas de un jugador<br>
 * <b>inv:</b><br>
 * nombreJugador != null<br>
 * aliasJugador != null<br>
 * batallasGanadas >= 0<br>
 * batallasPerdidas >= 0<br>
 */
public class RegistroJugador
{
    // -----------------------------------------------------------------
    // Atributos
    // -----------------------------------------------------------------
    /**
     * Nombre del jugador.
     */
    private String nombre;

    /**
     * Alias del jugador.
     */
    private String alias;

    /**
     * Número de batallas ganadas hasta el momento.
     */
    private int batallasGanadas;

    /**
     * Número de batallas perdidas hasta el momento.
     */
    private int batallasPerdidas;

    // -----------------------------------------------------------------
    // Constructores
    // -----------------------------------------------------------------

    /**
     * Crea un nuevo registro.
     * @param pNombre Nombre del jugador.pNombre != null.
     * @param pAlias Nombre del jugador.pNombre != null.
     * @param pGanadas Cantidad de batallas ganadas. pGanadas >= 0.
     * @param pPerdidas Cantidad de batallas perdidas. pGanadas >= 0.
     */
    public RegistroJugador( String pNombre, String pAlias, int pGanadas, int pPerdidas )
    {
        nombre = pNombre;
        alias = pAlias;
        batallasGanadas = pGanadas;
        batallasPerdidas = pPerdidas;
        verificarInvariante( );
    }

    // -----------------------------------------------------------------
    // Métodos
    // -----------------------------------------------------------------

    /**
     * Retorna el nombre del jugador.
     * @return Nombre del jugador.
     */
    public String darNombreJugador( )
    {
        return nombre;
    }
    

    /**
     * Retorna el nombre del jugador.
     * @return Nombre del jugador.
     */
    public String darAlias( )
    {
        return alias;
    }

    /**
     * Retorna el número de batallas ganadas por el jugador.
     * @return Cantidad de batallas ganadas.
     */
    public int darEncuentrosGanados( )
    {
        return batallasGanadas;
    }

    /**
     * Retorna el número de batallas perdidas por el jugador.
     * @return Cantidad de batallas perdidas.
     */
    public int darEncuentrosPerdidos( )
    {
        return batallasPerdidas;
    }

    /**
     * Retorna el porcentaje de efectividad del jugador. <br>
     * Si el jugador no ha terminado ningún encuentro, la efectividad es 0.
     * @return encuentrosGanados * 100 / encuentrosTotales
     */
    public double darEfectividad( )
    {
        if( batallasGanadas + batallasPerdidas > 0 )
            return ( ( double )batallasGanadas * 100.0 / ( double ) ( batallasGanadas + batallasPerdidas ) );
        else
            return 0.0;
    }

    /**
     * Retorna una cadena con la información del registro
     * @return Retorna una cadena de la forma <nombre>: <ganados> ganados / <perdidos> perdidos ( <efectividad>% )
     */
    public String toString( )
    {
        DecimalFormat df = new DecimalFormat( "0.00" );
        String efectividad = df.format( darEfectividad( ) );
        return alias + ": " + batallasGanadas + " ganados / " + batallasPerdidas + " perdidos (" + efectividad + "%)";
    }

    // -----------------------------------------------------------------
    // Invariante
    // -----------------------------------------------------------------

    /**
     * Verifica el invariante de la clase<br>
     * <b>inv:</b><br>
     * nombreJugador != null<br>
     * encuentrosGanados >= 0<br>
     * encuentrosPerdidos >= 0<br>
     */
    private void verificarInvariante( )
    {
        assert ( nombre != null ) : "El nombre no puede ser null";
        assert ( batallasGanadas >= 0 ) : "El número de encuentros ganados debe ser mayor o igual a 0";
        assert ( batallasPerdidas >= 0 ) : "El número de encuentros perdidos debe ser mayor o igual a 0";
    }
}
